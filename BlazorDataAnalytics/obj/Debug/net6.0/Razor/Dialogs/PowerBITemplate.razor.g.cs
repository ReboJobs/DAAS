#pragma checksum "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "403b4d7fcf519e514b41284dc9ed2d22dfa231cb"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorDataAnalytics.Dialogs
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using BlazorDataAnalytics;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using BlazorDataAnalytics.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Blazored.Modal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Blazored.Modal.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.DropDowns;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Buttons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Inputs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Calendars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Spinner;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Grids;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.SplitButtons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Popups;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using System.Security.Claims;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.RichTextEditor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using BlazorDataAnalytics.Dialogs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Azure.Security.KeyVault.Secrets;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Enums;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Services.ReportDashboardService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Services.UserVaultService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Services.KeyVaultManager;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Blazorade.Msal.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.AnalysisServices.Tabular;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.Data.SqlClient;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.Identity.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.PowerBI.Api;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.PowerBI.Api.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.Rest;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Persistence.Config.Entities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Syncfusion.Blazor.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.Azure.KeyVault;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.Azure.KeyVault.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using SecretProperties = Azure.Security.KeyVault.Secrets.SecretProperties;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Services.UserSecurityService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Syncfusion.Blazor.Diagram;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Syncfusion.Blazor.Navigations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using BlazorDataAnalytics.Services.ServicePrincipalService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 37 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using Microsoft.AspNetCore.Html;

#line default
#line hidden
#nullable disable
#nullable restore
#line 38 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using System.ComponentModel.DataAnnotations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 39 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
using System.Web;

#line default
#line hidden
#nullable disable
    public partial class PowerBITemplate : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<style> \r\n    .text-multiline textarea{ \r\n        height: 300px !important; \r\n    } \r\n</style> \r\n");
            __builder.OpenComponent<BlazorDataAnalytics.Dialogs.MessageBoxDialog>(1);
            __builder.AddComponentReferenceCapture(2, (__value) => {
#nullable restore
#line 45 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                    MessageDialog = (BlazorDataAnalytics.Dialogs.MessageBoxDialog)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(3, "\r\n");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "modal fade show d-block");
            __builder.AddAttribute(6, "tabindex", "-1");
            __builder.AddAttribute(7, "role", "dialog");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "modal-backdrop fade show");
            __builder.AddAttribute(10, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 47 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                    Cancel

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(11, "\r\n    ");
            __builder.OpenElement(12, "div");
            __builder.AddAttribute(13, "class", "modal-dialog");
            __builder.AddAttribute(14, "style", "z-index: 1050; max-width: 66%");
            __builder.OpenElement(15, "div");
            __builder.AddAttribute(16, "class", "modal-content");
            __builder.OpenElement(17, "div");
            __builder.AddAttribute(18, "class", "modal-header");
            __builder.AddMarkupContent(19, "<h5 class=\"modal-title\">Available Template</h5>\r\n                ");
            __builder.OpenElement(20, "button");
            __builder.AddAttribute(21, "type", "button");
            __builder.AddAttribute(22, "class", "close");
            __builder.AddAttribute(23, "aria-label", "Close");
            __builder.AddAttribute(24, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 53 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                 Close

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(25, "<span aria-hidden=\"true\">&times;</span>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(26, "\r\n                ");
            __builder.OpenElement(27, "div");
            __builder.AddAttribute(28, "class", "modal-body");
            __builder.OpenElement(29, "div");
            __builder.AddAttribute(30, "class", "control-container");
            __builder.OpenComponent<Syncfusion.Blazor.Spinner.SfSpinner>(31);
            __builder.AddAttribute(32, "Visible", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 59 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                             showSpinner

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(33, "VisibleChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Boolean>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Boolean>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => showSpinner = __value, showSpinner))));
            __builder.CloseComponent();
#nullable restore
#line 61 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                      if(_report !=null && _report.Value.Count() > 0 ){

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<Syncfusion.Blazor.Navigations.SfCarousel>(34);
            __builder.AddAttribute(35, "AutoPlay", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 62 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                false

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(36, "SelectedIndexChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Int32>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Int32>(this, 
#nullable restore
#line 62 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                               OnChangeCarrosel

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(37, "Id", "CarouselSlide");
            __builder.AddAttribute(38, "EnablePersistence", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 62 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                        true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(39, "EnableTouchSwipe", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 62 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                                                true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(40, "NextButtonTemplate", (Microsoft.AspNetCore.Components.RenderFragment)(
#nullable restore
#line 62 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                                                                           NextButtonTemplate

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(41, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
#nullable restore
#line 65 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                             if (_report != null)
                            {
                             foreach(var item in _report.Value)
                                       {

#line default
#line hidden
#nullable disable
                __builder2.OpenComponent<Syncfusion.Blazor.Navigations.CarouselItem>(42);
                __builder2.AddAttribute(43, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenElement(44, "div");
                    __builder3.AddAttribute(45, "class", "floating-container");
                    __builder3.OpenElement(46, "h3");
#nullable restore
#line (71,49)-(71,58) 26 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
__builder3.AddContent(47, item.Name);

#line default
#line hidden
#nullable disable
                    __builder3.CloseElement();
                    __builder3.CloseElement();
                    __builder3.AddMarkupContent(48, "\r\n                                        ");
                    __builder3.OpenElement(49, "div");
                    __builder3.AddAttribute(50, "style", "width:100%;max-width: 100%;height:500px");
                    __builder3.AddElementReferenceCapture(51, (__value) => {
#nullable restore
#line 73 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                    carouselComponents[item.Id.ToString()] = __value;

#line default
#line hidden
#nullable disable
                    }
                    );
                    __builder3.CloseElement();
                }
                ));
                __builder2.CloseComponent();
#nullable restore
#line 75 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                       
                                    }
                            }

#line default
#line hidden
#nullable disable
            }
            ));
            __builder.CloseComponent();
#nullable restore
#line 81 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                        }else{                           


#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(52, "<div class=\"container\" style=\"  height: 100%; align-items: center;text-align:center;\"><div class=\"alert alert-success\"><h2> No Available Template.</h2></div></div>");
#nullable restore
#line 89 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(53, "\r\n            ");
            __builder.OpenElement(54, "div");
            __builder.AddAttribute(55, "class", "modal-footer");
            __builder.OpenElement(56, "div");
            __builder.AddAttribute(57, "class", "container");
            __builder.OpenElement(58, "div");
            __builder.AddAttribute(59, "class", "row");
            __builder.OpenElement(60, "div");
            __builder.AddAttribute(61, "class", "col-sm");
            __builder.OpenComponent<Syncfusion.Blazor.DropDowns.SfDropDownList<string, Dataset>>(62);
            __builder.AddAttribute(63, "Placeholder", "Bind to a Dataset");
            __builder.AddAttribute(64, "DataSource", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.IEnumerable<Dataset>>(
#nullable restore
#line 97 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                                       datasetListCustomer

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(65, "Value", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<string>(
#nullable restore
#line 97 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                         selectedDataset

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(66, "ValueChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<string>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<string>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => selectedDataset = __value, selectedDataset))));
            __builder.AddAttribute(67, "ValueExpression", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<string>>>(() => selectedDataset));
            __builder.AddAttribute(68, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<Syncfusion.Blazor.DropDowns.DropDownListFieldSettings>(69);
                __builder2.AddAttribute(70, "Text", "Name");
                __builder2.AddAttribute(71, "Value", "Id");
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(72, " \r\n                                 ");
                __builder2.OpenComponent<Syncfusion.Blazor.DropDowns.DropDownListEvents<string, Dataset>>(73);
                __builder2.AddAttribute(74, "ValueChange", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Syncfusion.Blazor.DropDowns.ChangeEventArgs<string, Dataset>>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Syncfusion.Blazor.DropDowns.ChangeEventArgs<string, Dataset>>(this, 
#nullable restore
#line 99 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                   ValueChangeHandler

#line default
#line hidden
#nullable disable
                )));
                __builder2.CloseComponent();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(75, "\r\n                 ");
            __builder.OpenElement(76, "div");
            __builder.AddAttribute(77, "class", "row");
            __builder.OpenElement(78, "div");
            __builder.AddAttribute(79, "class", "col-sm");
            __builder.AddMarkupContent(80, "<br>\r\n                             ");
            __builder.OpenComponent<Syncfusion.Blazor.Buttons.SfButton>(81);
            __builder.AddAttribute(82, "CssClass", "e-info");
            __builder.AddAttribute(83, "Content", "Create Report");
            __builder.AddAttribute(84, "OnClick", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Web.MouseEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 107 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                           OnBtnClick

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(85, "Disabled", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 107 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                  !IsEnableReportButton

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(86, "\r\n                 ");
            __builder.OpenElement(87, "div");
            __builder.AddAttribute(88, "id", "target");
            __builder.OpenComponent<Syncfusion.Blazor.Popups.SfDialog>(89);
            __builder.AddAttribute(90, "Target", "#target");
            __builder.AddAttribute(91, "Width", "300px");
            __builder.AddAttribute(92, "ShowCloseIcon", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 114 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(93, "AllowPrerender", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 114 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                 true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(94, "IsModal", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 114 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                                true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(95, "Visible", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 114 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                     Visibility

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(96, "VisibleChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Boolean>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Boolean>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => Visibility = __value, Visibility))));
            __builder.AddAttribute(97, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.OpenComponent<Syncfusion.Blazor.Popups.DialogTemplates>(98);
                __builder2.AddAttribute(99, "Header", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.AddContent(100, " Entry ");
                }
                ));
                __builder2.AddAttribute(101, "Content", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenElement(102, "div");
                    __builder3.AddAttribute(103, "class", "row");
                    __builder3.OpenComponent<Syncfusion.Blazor.Inputs.SfTextBox>(104);
                    __builder3.AddAttribute(105, "Placeholder", "Enter Report Name");
                    __builder3.AddAttribute(106, "CssClass", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 119 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                     CssClass

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(107, "Value", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 119 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                              reportName

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(108, "ValueChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => reportName = __value, reportName))));
                    __builder3.AddAttribute(109, "ValueExpression", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() => reportName));
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(110, "\r\n                                     <br><br>\r\n                                           ");
                    __builder3.OpenComponent<Syncfusion.Blazor.SplitButtons.SfProgressButton>(111);
                    __builder3.AddAttribute(112, "Content", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 121 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                       Content

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(113, "EnableProgress", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 121 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                true

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(114, "CssClass", "e-success");
                    __builder3.AddAttribute(115, "Duration", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Double>(
#nullable restore
#line 121 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                     1000

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(116, "IconCss", "e-icons e-save e-small camera");
                    __builder3.AddAttribute(117, "Disabled", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 121 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                                                                                                                              !enableButton

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(118, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder4) => {
                        __builder4.OpenComponent<Syncfusion.Blazor.SplitButtons.ProgressButtonEvents>(119);
                        __builder4.AddAttribute(120, "OnBegin", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Syncfusion.Blazor.SplitButtons.ProgressEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Syncfusion.Blazor.SplitButtons.ProgressEventArgs>(this, 
#nullable restore
#line 122 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                           Begin

#line default
#line hidden
#nullable disable
                        )));
                        __builder4.AddAttribute(121, "OnEnd", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Syncfusion.Blazor.SplitButtons.ProgressEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Syncfusion.Blazor.SplitButtons.ProgressEventArgs>(this, 
#nullable restore
#line 122 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
                                                                                         End

#line default
#line hidden
#nullable disable
                        )));
                        __builder4.CloseComponent();
                    }
                    ));
                    __builder3.CloseComponent();
                    __builder3.CloseElement();
                }
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(122, "\r\n                              ");
                __builder2.OpenComponent<Syncfusion.Blazor.Popups.DialogPositionData>(123);
                __builder2.AddAttribute(124, "X", "center");
                __builder2.AddAttribute(125, "Y", "center");
                __builder2.CloseComponent();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(126, "\r\n\r\n");
            __builder.AddMarkupContent(127, @"<style>
    .control-container {
        background-color: #adb5bd;
        height: 70vh;
        margin: 0 auto;
        width: 100%;
    }

    .e-carousel .slide-content {
        align-items: center;
        display: flex;
        font-size: 1.25rem;
        height: 100%;
        justify-content: center;
    }
    .floating-botton{
        position: absolute;
        bottom: 0;
        right: 0px;
        z-index: 3000;
    }
    .floating-container{
        position: absolute;
        width: 100%;
        bottom: 10%;
        left: 0px;
        z-index: 3000;
        background-color:rgba(135,206,235, 1);


    }
    .e-ddl.e-input-group.e-control-wrapper .e-input {
    font-size: 20px;
    font-family: emoji;
    color: #ab3243;
    background: #32a5ab;
}
.e-dropdownbase .e-list-item.e-item-focus, .e-dropdownbase .e-list-item.e-active, .e-dropdownbase .e-list-item.e-active.e-hover, .e-dropdownbase .e-list-item.e-hover {
    background-color: #1f9c99;
    color: #2319b8;
}
    .e-carousel .e-carousel-navigators .e-previous .e-btn:not(:disabled), .e-carousel .e-carousel-navigators .e-next .e-btn:not(:disabled), .e-carousel .e-carousel-navigators .e-play-pause .e-btn:not(:disabled) {
    background-color: #adaaaa !important;
}
   .e-dlg-center-center {
    position: fixed !important;
}
</style>");
        }
        #pragma warning restore 1998
#nullable restore
#line 134 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Dialogs\PowerBITemplate.razor"
       

    [CascadingParameter]
    private BlazoredModalInstance _modalInstance { get; set; }

    [CascadingParameter]
    public IModalService Modal { get; set; }

    [Parameter]
    public Guid _workspaceId { get; set; }
    [Parameter]
    public int? id { get; set; } = 0;
    [Parameter]
    public int _customerId { get; set; }
    [Parameter]
    public Reports _report { get; set; }
    [Parameter]
    public PowerBIClient _client{ get; set; }
    [Parameter]
    public PowerBIEmbedConfig _result{ get; set; }

    MessageBoxDialog MessageDialog;

    private bool disableButton { get; set; } = false;
    private bool showSpinner { get; set; }
    private ElementReference PowerBIElement;
    private IList<Group>? _group;
    private bool Visibility { get; set; } = false;
    private bool enableButton { get; set; } = true;
    private int _customerTenantId { get; set; }
    private UserVaultAppDetailModel UserVaultAppDetail = new UserVaultAppDetailModel();
    [Required]
    public string DropVal{ get; set; }
    [Required]
    public string selectedDataset{ get; set; }
    private Guid _reportId;   
    string buttonColor = string.Empty;
    string logo = string.Empty;
    string backgroundBody = string.Empty;
    private bool isRendered = false;
    private UserThemeSettingModel userTheme { get; set; } = new UserThemeSettingModel() ;
    public string CssClass { get; set; }
    public string Content = "Save....";
    public string reportName { get; set; }
    private IEnumerable<Claim> _claims = Enumerable.Empty<Claim>();
    private List<string> identifiersUI  = new List<string>();
    private Dictionary<string, ElementReference> carouselComponents = new Dictionary<string, ElementReference>();
    private List<ReportDetail> reportList = new List<ReportDetail>();
    public int SelectedIndex { get; set; }
    public EventCallback<int> SelectedIndexChanged { get; set; }
    public RenderFragment NextButtonTemplate { get; set; }
    private UserNameGroupRolesModel userNameGroupRolesModel = new UserNameGroupRolesModel();
    private string userNameIdentity { get; set; }
    private List<Dataset> datasetListCustomer = new List<Dataset>();
    private string _profileId = string.Empty;
    private bool IsRerender { get; set; } = false; 
    private bool IsEnableReportButton{ get; set; } = false; 

    public class ReportDetail 
    { 
        public string Id { get; set; } 
        public string Name{ get; set; } 
    }
    bool OnInputTriger = false;
    bool OnCreateReportTriger = false;


    protected override async Task OnInitializedAsync()
    {
        foreach (var rep in _report.Value)
        {
            identifiersUI.Add(rep.Id.ToString());
            carouselComponents.Add(rep.Id.ToString(), new ElementReference());
            ReportDetail repDet = new ReportDetail();
            repDet.Id = rep.Id.ToString();
            repDet.Name = rep.Name;
            reportList.Add(repDet);

        }
        //Retrieve workspace ID from customer
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        userNameIdentity = user?.Identity?.Name;
        userNameGroupRolesModel = await _userSecurityService.GetUserNameGroupRoles(userNameIdentity);

        if (userNameGroupRolesModel.WorkspaceId == Guid.Empty)
        {
            showSpinner = false;
            return;
        }
        IsEnableReportButton = true;
        _customerTenantId = userNameGroupRolesModel.CustomerTenantId;
        var customerTenant = await _userSecurityService.GetCustomerTenants(_customerTenantId);
        if (customerTenant.ProfileId > 0)
        {
            var profile = _iAppOwnsDataMultiTenantDbService.GetProfileById((int)customerTenant.ProfileId);
            _profileId = profile != null ? profile.ProfileId : null;
        }

    }

    async Task OnChangeCarrosel(int x)
    {
        this.DropVal =  this.reportList[x].Id;
    }

    private void OnBtnClick()
    {
        this.OnCreateReportTriger = true;
        this.Visibility = !this.Visibility ;
        IsRerender = true;
    }
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (OnCreateReportTriger)
        {
            OnCreateReportTriger = false;
            return;
        }
        showSpinner = true;
        if (!IsRerender)
        {
            await RenderReport(firstRender);
        }
        if (firstRender)
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;
            var   claims = user.Claims;
            var   userEmail = claims?.FirstOrDefault(x => x.Type.Equals("preferred_username", StringComparison.OrdinalIgnoreCase))?.Value;              
            this.DropVal = this.reportList.Count > 0 ? this.reportList[0].Id: null;
            if (id > 0)
            {
                UserVaultAppDetail = await _userVaultService.GetUserVaultAppDetails(id);

            }
        }


        showSpinner = false;

    }
    public void Begin(Syncfusion.Blazor.SplitButtons.ProgressEventArgs args)
    {
        Content = "Saving...";
        CssClass = "e-hide-spinner e-info border-radius";
    }

    public async Task End(Syncfusion.Blazor.SplitButtons.ProgressEventArgs args)
    {
        await   GenerateReport();
        Content = "Saved....";
        CssClass = "e-hide-spinner e-success border-radius";
        await Task.Delay(1000);
        Content = "Save....";
        CssClass = "e-hide-spinner border-radius";

    }
    private void ValueChangeHandler(ChangeEventArgs<string, Dataset> args)
    {
        // Here, you can customize your code.
        IsRerender = true;
    }
    private async void ValueChangeHandler(ChangeEventArgs<string, ReportDetail> args)
    {
        disableButton = args.Value != string.Empty;
        selectedDataset = null;
        if (args.Value != null)
        {
            AuthenticationResult authenticationResult = null;
            authenticationResult = await DoAuthentication();
            DatasetManager dsmanager ;
            dsmanager = new DatasetManager(true, userNameGroupRolesModel.WorkspaceUrl,authenticationResult);
            string reportData = reportList.Where(x => x.Id == DropVal).FirstOrDefault().Id;
            var datasetfromTemplate = _client.Reports.GetReport(new Guid(_configuration.GetSection("PowerBiTemplate:WorkspaceId").Value),new Guid(reportData));
            var datasetTemplate = _client.Datasets.GetDataset(new Guid(_configuration.GetSection("PowerBiTemplate:WorkspaceId").Value),datasetfromTemplate.DatasetId);
            var dataSetList = _client.Datasets.GetDatasets(_workspaceId);

            var templateTables = dsmanager.GetAllTablesFromTemplateWorkspace(datasetTemplate.Name);

            int counter = templateTables.Tables.Where(x=> !x.Name.ToLower().Contains("datetabletemplate") && !x.Name.ToLower().Contains("localdatetable")) != null ? templateTables.Tables.Where(x=> !x.Name.ToLower().Contains("datetabletemplate") && !x.Name.ToLower().Contains("localdatetable")) .Count() : 0;
            foreach (var item in dataSetList.Value)
            {
                var tablesFromCustomer = dsmanager.GetAllTablesFromCustomerWorkspace(item.Name);
                if(tablesFromCustomer!=null)
                    foreach (var ds in templateTables.Tables.Where(x=> !x.Name.ToLower().Contains("datetabletemplate") && !x.Name.ToLower().Contains("localdatetable")))
                    {
                        if(tablesFromCustomer.Tables.Where(x=> x.Name.ToLower().Trim() == ds.Name.Trim() &&
                                                   (!x.Name.ToLower().Contains("datetabletemplate") && !x.Name.ToLower().Contains("localdatetable"))) !=null 
                                                   && tablesFromCustomer.Tables.Where(x=> x.Name.Trim() == ds.Name.Trim() 
                                                   && (!x.Name.ToLower().Contains("datetabletemplate") 
                                                   && !x.Name.ToLower().Contains("localdatetable"))).Count() > 0 )
                        {
                            counter--;
                            if (counter == 0)
                            {
                                var dsCustomer = _client.Datasets.GetDataset( _workspaceId, tablesFromCustomer.Database.ID); 
                                datasetListCustomer.Add(dsCustomer);
                            }
                        }

                    }



            } 

        }
    }

    private const string AuthorityFormat = "https://login.microsoftonline.com/94e6b5f2-d1da-4de9-a4ca-88cfdb6c3de0/v2.0";
    private const string MSGraphScope = "https://analysis.windows.net/powerbi/api/.default";
    private async Task<Microsoft.Identity.Client.AuthenticationResult> DoAuthentication()
    {
        IConfidentialClientApplication daemonClient;
        daemonClient = ConfidentialClientApplicationBuilder.Create(_configuration.GetSection("AzureAd:ClientId").Value)
            .WithAuthority(string.Format(AuthorityFormat, _configuration.GetSection("AzureAd:TenantId").Value))
            .WithClientSecret(_configuration.GetSection("AzureAd:ClientSecret").Value)
            .Build();

        AuthenticationResult authResult = await daemonClient.AcquireTokenForClient(new[] { MSGraphScope }).ExecuteAsync();
        return authResult;
    }

    private async Task RenderReport(bool firstRender)
    {
        foreach (var report in _report.Value)
        {
            //  var clientReport = _client.Reports.GetReport(_workspaceId, Guid.Parse(_report.Value.First().Id.ToString()));
            var generateTokenRequestParameters = new GenerateTokenRequest(accessLevel: "View");
            var tokenResponse = _client.Reports.GenerateTokenAsync(new Guid( _configuration.GetSection("PowerBiTemplate:WorkspaceId").Value), new Guid(report.Id.ToString()), generateTokenRequestParameters).Result;

            _result.EmbedToken = tokenResponse;
            _result.EmbedUrl = report.EmbedUrl;
            _result.Id = report.Id.ToString();
            JSRuntime.InvokeAsync<object>(
                    "ShowMyPowerBI.showReport",
                    carouselComponents[report.Id.ToString()],
                    tokenResponse.Token,
                    report.EmbedUrl,
                     report.Id.ToString(),
                    "true",
                    "false"
                    );
        }
        if (firstRender) { InvokeAsync(() => StateHasChanged()); };
    }
    private void Cancel()
    {
        _modalInstance.CancelAsync();
    }

    private async Task Close()
    {
        await _modalInstance.CloseAsync();
    }

    public async Task GenerateReport()
    {
        if (string.IsNullOrEmpty(DropVal)) return;
        try
        {
            var reportItem = _report.Value.Where(x => x.Id == new Guid(DropVal)).FirstOrDefault();

            CloneReportRequest cloneReportRequest = new CloneReportRequest();
            cloneReportRequest.Name = reportName;
            cloneReportRequest.TargetWorkspaceId = _workspaceId;

            var cloned = _client.Reports.CloneReportInGroup(new Guid(_configuration.GetSection("PowerBiTemplate:WorkspaceId").Value), reportItem.Id, cloneReportRequest);
            var datasets = _client.Datasets.GetDataset(new Guid(_configuration.GetSection("PowerBiTemplate:WorkspaceId").Value), reportItem.DatasetId);
            AuthenticationResult authenticationResult = null;
            authenticationResult = await DoAuthentication();
            DatasetManager manager = new DatasetManager(true, userNameGroupRolesModel.WorkspaceUrl, authenticationResult);
            var newDataset = new Microsoft.AnalysisServices.Tabular.Database();
            if (selectedDataset == null)
            {
                newDataset = await DatasetManager.CopyDatabaseToOtherWorkspace(datasets.Name, reportName);
                //  _client.Datasets.TakeOver(_workspaceId, newDataset.ID.ToString());
                SqlConnectionStringBuilder connectionStringBuilder =new SqlConnectionStringBuilder(_configuration.GetConnectionString("XeroConnection"));
                if(id > 0 && !string.IsNullOrEmpty(UserVaultAppDetail.DatabaseName) && !string.IsNullOrEmpty(UserVaultAppDetail.ServerName) && !string.IsNullOrEmpty(UserVaultAppDetail.UserPassword) && !string.IsNullOrEmpty(UserVaultAppDetail.UserName))
                    manager.PatchSqlDatasourceCredentials(_workspaceId, newDataset.ID,UserVaultAppDetail.ServerName,UserVaultAppDetail.DatabaseName, UserVaultAppDetail.UserName,UserVaultAppDetail.UserPassword,_profileId);
                else
                    manager.PatchSqlDatasourceCredentials(_workspaceId, newDataset.ID, AppSettings.sqlUserName, AppSettings.sqlUserPassword,_profileId, connectionStringBuilder.DataSource.ToString());
            }
            else
            {
                newDataset.ID = selectedDataset;

            }

            RebindReportRequest rebindReq = new RebindReportRequest();
            rebindReq.DatasetId = newDataset.ID;
            _client.Datasets.RefreshDataset(_workspaceId, newDataset.ID);
            _client.Reports.RebindReport(_workspaceId, cloned.Id, rebindReq);
            _client.Datasets.TakeOver(_workspaceId, newDataset.ID);

            var customerUserRole = new CustomerUserRole
            {
                CustomerTernantId = _customerTenantId,
                Description = $"View {reportName} Report",
                UserRoleName =reportName,
                IsActive = true,
            };

            string reportRoleCode = await _userSecurityService.InsertCustomerUserRoleByName(customerUserRole);

            string newTitle = await _reportDashboardService.UpsertReportInDashboard(reportName,cloned.Id, reportRoleCode);


            this.Visibility= !this.Visibility;
            reportName = null;
            selectedDataset = null;
            var options = new ModalOptions { UseCustomLayout = true };

            var modalParams = new ModalParameters();

            MessageDialog.OpenDialog(AlertStatus.Success,string.Format("Report for '{0}' successfully created.", cloned.Name));

        } catch (Exception ex) {

         MessageDialog.OpenDialog(AlertStatus.Danger,ex.Message);
        }
        //}
        //catch (Exception ex) { }

    }
    private void showAlertMessage(string alertType, string message, string title)
    {
            MessageDialog.OpenDialog(alertType,message);
    }


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IAppOwnsDataMultiTenantDbService _iAppOwnsDataMultiTenantDbService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IReportDashboardService _reportDashboardService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IKeyVaultManager _keyVaultManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IUserVaultService _userVaultService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IUserSecurityService _userSecurityService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IConfiguration _configuration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private BlazoradeMsalService msalService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager UriHelper { get; set; }
    }
}
#pragma warning restore 1591
