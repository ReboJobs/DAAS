#pragma checksum "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d537963a367e79d28f6f50989146b8313b059cc7"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorDataAnalytics.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 2 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using BlazorDataAnalytics;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using BlazorDataAnalytics.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Blazored.Modal;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Blazored.Modal.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.DropDowns;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Buttons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Inputs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Calendars;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Spinner;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Grids;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.SplitButtons;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.Popups;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using System.Security.Claims;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor.RichTextEditor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\_Imports.razor"
using Syncfusion.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using BlazorDataAnalytics.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using BlazorDataAnalytics.Dialogs;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Microsoft.Identity.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Microsoft.PowerBI.Api;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Microsoft.PowerBI.Api.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Microsoft.Rest;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Microsoft.Azure.Management.DataFactory.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Azure.Analytics.Synapse.Artifacts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Azure.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using System.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using BlazorDataAnalytics.Enums;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using BlazorDataAnalytics.Services.KeyVaultManager;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using BlazorDataAnalytics.Services.UserVaultService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
using BlazorDataAnalytics.Services.UserSecurityService;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/datasources")]
    public partial class UserVault : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Web.PageTitle>(0);
            __builder.AddAttribute(1, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddContent(2, "User Vault");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(3, "\r\n");
            __builder.OpenComponent<BlazorDataAnalytics.Dialogs.MessageBoxDialog>(4);
            __builder.AddComponentReferenceCapture(5, (__value) => {
#nullable restore
#line 27 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                    messageBoxDialog = (BlazorDataAnalytics.Dialogs.MessageBoxDialog)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(6, "\r\n");
            __builder.AddMarkupContent(7, "<div class=\"row col-lg-8 filter-bar\"><div class=\"col-lg-12\"><h3 style=\"text-shadow: 1px 1px 5px white;text-align:center;\">Datasources</h3></div></div>\r\n\r\n\r\n");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "col-lg-12 control-section");
            __builder.AddAttribute(10, "style", "margin-top:1%;");
            __builder.OpenComponent<Syncfusion.Blazor.Spinner.SfSpinner>(11);
            __builder.AddAttribute(12, "Visible", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 36 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                              showSpinner

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(13, "VisibleChanged", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Boolean>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Boolean>(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => showSpinner = __value, showSpinner))));
            __builder.CloseComponent();
            __builder.AddMarkupContent(14, "\r\n    ");
            __builder.OpenElement(15, "div");
            __builder.AddAttribute(16, "class", "content-wrapper");
            __builder.OpenElement(17, "div");
            __builder.AddAttribute(18, "class", "row");
            __Blazor.BlazorDataAnalytics.Pages.UserVault.TypeInference.CreateSfGrid_0(__builder, 19, 20, 
#nullable restore
#line 40 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                 listUserVaults

#line default
#line hidden
#nullable disable
            , 21, "500", 22, "100%", 23, 
#nullable restore
#line 40 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                      new List<string>() { "Add", "Search" }

#line default
#line hidden
#nullable disable
            , 24, (__builder2) => {
                __builder2.OpenComponent<Syncfusion.Blazor.Grids.GridEditSettings>(25);
                __builder2.AddAttribute(26, "AllowAdding", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 41 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                              true

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(27, "Mode", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Syncfusion.Blazor.Grids.EditMode>(
#nullable restore
#line 41 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                         EditMode.Dialog

#line default
#line hidden
#nullable disable
                ));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(28, "\r\n                ");
                __builder2.OpenComponent<Syncfusion.Blazor.Grids.GridEvents<UserVaultModel>>(29);
                __builder2.AddAttribute(30, "OnActionBegin", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Syncfusion.Blazor.Grids.ActionEventArgs<UserVaultModel>>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Syncfusion.Blazor.Grids.ActionEventArgs<UserVaultModel>>(this, 
#nullable restore
#line 42 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                   OnActionBegin

#line default
#line hidden
#nullable disable
                )));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(31, "\r\n                ");
                __builder2.OpenComponent<Syncfusion.Blazor.Grids.GridColumns>(32);
                __builder2.AddAttribute(33, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment)((__builder3) => {
                    __builder3.OpenComponent<Syncfusion.Blazor.Grids.GridColumn>(34);
                    __builder3.AddAttribute(35, "Field", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 44 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                       nameof(UserVaultModel.Id)

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(36, "TextAlign", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Syncfusion.Blazor.Grids.TextAlign>(
#nullable restore
#line 44 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                            TextAlign.Center

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(37, "HeaderText", "Id");
                    __builder3.AddAttribute(38, "Width", "20");
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(39, "\r\n                    ");
                    __builder3.OpenComponent<Syncfusion.Blazor.Grids.GridColumn>(40);
                    __builder3.AddAttribute(41, "Field", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 45 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                       nameof(UserVaultModel.SystemName)

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(42, "HeaderText", "System Name");
                    __builder3.AddAttribute(43, "ShowInColumnChooser", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 45 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                       false

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(44, "Width", "30");
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(45, "\r\n                    ");
                    __builder3.OpenComponent<Syncfusion.Blazor.Grids.GridColumn>(46);
                    __builder3.AddAttribute(47, "Field", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 46 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                       nameof(UserVaultModel.Description)

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(48, "HeaderText", "Description");
                    __builder3.AddAttribute(49, "Width", "100");
                    __builder3.CloseComponent();
                    __builder3.AddMarkupContent(50, "\r\n                    ");
                    __builder3.OpenComponent<Syncfusion.Blazor.Grids.GridColumn>(51);
                    __builder3.AddAttribute(52, "TextAlign", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Syncfusion.Blazor.Grids.TextAlign>(
#nullable restore
#line 47 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                           TextAlign.Center

#line default
#line hidden
#nullable disable
                    ));
                    __builder3.AddAttribute(53, "Width", "50");
                    __builder3.AddAttribute(54, "Template", (Microsoft.AspNetCore.Components.RenderFragment<System.Object>)((context) => (__builder4) => {
#nullable restore
#line 49 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                              
                                var userVault = (context as UserVaultModel);

#line default
#line hidden
#nullable disable
                        __builder4.OpenElement(55, "div");
                        __builder4.AddAttribute(56, "class", "image");
                        __builder4.OpenComponent<Syncfusion.Blazor.Buttons.SfButton>(57);
                        __builder4.AddAttribute(58, "IconCss", "e-icons e-edit e-btn-icon");
                        __builder4.AddAttribute(59, "CssClass", "e-btn-grd");
                        __builder4.AddAttribute(60, "HtmlAttributes", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.Dictionary<System.String, System.Object>>(
#nullable restore
#line 52 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                         new Dictionary<string, object>(){{ "title", "Edit"}}

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.AddAttribute(61, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 52 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                                                                                          async (e) => await EditUserVault(userVault)

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.CloseComponent();
                        __builder4.AddMarkupContent(62, "\r\n                                    ");
                        __builder4.OpenComponent<Syncfusion.Blazor.Buttons.SfButton>(63);
                        __builder4.AddAttribute(64, "IconCss", "e-icons e-delete-row e-btn-icon");
                        __builder4.AddAttribute(65, "CssClass", "e-btn-grd");
                        __builder4.AddAttribute(66, "HtmlAttributes", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.Dictionary<System.String, System.Object>>(
#nullable restore
#line 53 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                               new Dictionary<string, object>(){{ "title", "Delete Data Source and its data"}}

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.AddAttribute(67, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 53 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                                                                                                                           async (e) => await ViewDeleteUserVault(userVault)

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.CloseComponent();
                        __builder4.AddMarkupContent(68, "\r\n                                    ");
                        __builder4.OpenComponent<Syncfusion.Blazor.Buttons.SfButton>(69);
                        __builder4.AddAttribute(70, "IconCss", "e-icons e-copy e-btn-icon");
                        __builder4.AddAttribute(71, "CssClass", "e-btn-grd");
                        __builder4.AddAttribute(72, "HtmlAttributes", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.Dictionary<System.String, System.Object>>(
#nullable restore
#line 54 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                         new Dictionary<string, object>(){{ "title", "Report Templates"}}

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.AddAttribute(73, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 54 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                                                                                                      async (e) => await  ViewPowerBITemplate(userVault)

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.CloseComponent();
                        __builder4.AddMarkupContent(74, "\r\n                                    ");
                        __builder4.OpenComponent<Syncfusion.Blazor.Buttons.SfButton>(75);
                        __builder4.AddAttribute(76, "IconCss", "e-icons e-play e-btn-icon");
                        __builder4.AddAttribute(77, "CssClass", "e-btn-grd");
                        __builder4.AddAttribute(78, "HtmlAttributes", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.Dictionary<System.String, System.Object>>(
#nullable restore
#line 55 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                         new Dictionary<string, object>(){{ "title", "Force Sync"}}

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.AddAttribute(79, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 55 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                                                                                                                                                async (e) => await  RunAzureSynapsePipeline(userVault)

#line default
#line hidden
#nullable disable
                        ));
                        __builder4.CloseComponent();
                        __builder4.CloseElement();
                    }
                    ));
                    __builder3.CloseComponent();
                }
                ));
                __builder2.CloseComponent();
            }
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(80, "\r\n\r\n");
            __builder.OpenComponent<BlazorDataAnalytics.Dialogs.UserVaultDialog>(81);
            __builder.AddAttribute(82, "RefreshPageEventCallBack", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Boolean>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Boolean>(this, 
#nullable restore
#line 66 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                  RefreshCustomerPage

#line default
#line hidden
#nullable disable
            )));
            __builder.AddComponentReferenceCapture(83, (__value) => {
#nullable restore
#line 66 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                       UserVaultDialog = (BlazorDataAnalytics.Dialogs.UserVaultDialog)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(84, "\r\n");
            __builder.OpenComponent<BlazorDataAnalytics.Dialogs.DeleteUserVaultDialog>(85);
            __builder.AddAttribute(86, "RefreshPageEventCallBack", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.Boolean>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.Boolean>(this, 
#nullable restore
#line 67 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                                                                              RefreshCustomerPage

#line default
#line hidden
#nullable disable
            )));
            __builder.AddComponentReferenceCapture(87, (__value) => {
#nullable restore
#line 67 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                             DeleteUserVaultDialog = (BlazorDataAnalytics.Dialogs.DeleteUserVaultDialog)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(88, "\r\n ");
            __builder.OpenComponent<BlazorDataAnalytics.Dialogs.PowerBITemplateDialog>(89);
            __builder.AddComponentReferenceCapture(90, (__value) => {
#nullable restore
#line 68 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
                              powerBiTemplateDialog = (BlazorDataAnalytics.Dialogs.PowerBITemplateDialog)__value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.CloseComponent();
            __builder.AddMarkupContent(91, "  \r\n\r\n\r\n\r\n\r\n");
            __builder.AddMarkupContent(92, "<style>@media (min-width:320px) {\r\n        .filter-bar {\r\n            top: .7em;\r\n            text-align: center;\r\n            padding: 5px;\r\n            box-shadow: 0px 0px 0px 0px #a5aba594;\r\n            border-radius: 1px;\r\n            -webkit-tap-highlight-color: transparent;\r\n            border-color: transparent;\r\n            color: rgba(0,0,0,0.87);\r\n            transition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n    }\r\n\r\n    @media (min-width:481px) {\r\n        .filter-bar {\r\n            top: .7em;\r\n            text-align: center;\r\n            padding: 5px;\r\n            box-shadow: 0px 0px 0px 0px #a5aba594;\r\n            border-radius: 1px;\r\n            -webkit-tap-highlight-color: transparent;\r\n            border-color: transparent;\r\n            color: rgba(0,0,0,0.87);\r\n            transition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n    }\r\n\r\n    @media (min-width:641px) {\r\n        .filter-bar {\r\n            top: .7em;\r\n            text-align: center;\r\n            padding: 5px;\r\n            box-shadow: 0px 0px 0px 0px #a5aba594;\r\n            border-radius: 1px;\r\n            -webkit-tap-highlight-color: transparent;\r\n            border-color: transparent;\r\n            color: rgba(0,0,0,0.87);\r\n            transition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n    }\r\n\r\n    @media (min-width:961px) {\r\n        .filter-bar {\r\n            cursor: pointer;\r\n            right: 13vw;\r\n            /* left: 5vw; */\r\n            top: .7em;\r\n            position: absolute;\r\n            text-align: center;\r\n            padding: 5px;\r\n            box-shadow: 0px 0px 0px 0px #a5aba594;\r\n            border-radius: 1px;\r\n            -webkit-tap-highlight-color: transparent;\r\n            border-color: transparent;\r\n            color: rgba(0,0,0,0.87);\r\n            transition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n    }\r\n\r\n    @media (min-width:1025px) {\r\n        .filter-bar {\r\n            cursor: pointer;\r\n            right: 13vw;\r\n            /* left: 5vw; */\r\n            top: .7em;\r\n            position: absolute;\r\n            text-align: center;\r\n            padding: 5px;\r\n            box-shadow: 0px 0px 0px 0px #a5aba594;\r\n            border-radius: 1px;\r\n            -webkit-tap-highlight-color: transparent;\r\n            border-color: transparent;\r\n            color: rgba(0,0,0,0.87);\r\n            transition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n    }\r\n\r\n    @media (min-width:1281px) {\r\n        .filter-bar {\r\n            cursor: pointer;\r\n            right: 13vw;\r\n            /* left: 5vw; */\r\n            top: .7em;\r\n            position: absolute;\r\n            text-align: center;\r\n            padding: 5px;\r\n            box-shadow: 0px 0px 0px 0px #a5aba594;\r\n            border-radius: 1px;\r\n            -webkit-tap-highlight-color: transparent;\r\n            border-color: transparent;\r\n            color: rgba(0,0,0,0.87);\r\n            transition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);\r\n        }\r\n    }\r\n\r\n    .e-btn-grd {\r\n        background-color: transparent !important;\r\n    }\r\n\r\n    .control-container {\r\n        background-color: #adb5bd;\r\n        height: 70vh;\r\n        margin: 0 auto;\r\n        width: 100%;\r\n    }\r\n\r\n    .e-carousel .slide-content {\r\n        align-items: center;\r\n        display: flex;\r\n        font-size: 1.25rem;\r\n        height: 100%;\r\n        justify-content: center;\r\n    }\r\n\r\n    .floating-botton {\r\n        position: absolute;\r\n        bottom: 0;\r\n        right: 0px;\r\n        z-index: 3000;\r\n    }\r\n\r\n    .floating-container {\r\n        position: absolute;\r\n        width: 100%;\r\n        bottom: 10%;\r\n        left: 0px;\r\n        z-index: 3000;\r\n        background-color: rgba(135,206,235, 1);\r\n    }\r\n\r\n    .e-ddl.e-input-group.e-control-wrapper .e-input {\r\n        /*    font-size: 20px;\r\n            font-family: emoji;\r\n            color: #ab3243;\r\n            background: #32a5ab;\r\n        */\r\n    }\r\n\r\n    .e-dropdownbase .e-list-item.e-item-focus, .e-dropdownbase .e-list-item.e-active, .e-dropdownbase .e-list-item.e-active.e-hover, .e-dropdownbase .e-list-item.e-hover {\r\n        background-color: #1f9c99;\r\n        color: #2319b8;\r\n    }\r\n\r\n    .e-carousel .e-carousel-navigators .e-previous .e-btn:not(:disabled), .e-carousel .e-carousel-navigators .e-next .e-btn:not(:disabled), .e-carousel .e-carousel-navigators .e-play-pause .e-btn:not(:disabled) {\r\n        background-color: #adaaaa !important;\r\n    }\r\n\r\n    .e-dlg-center-center {\r\n        position: fixed !important;\r\n    }\r\n\r\n    .text-multiline textarea {\r\n        height: 300px !important;\r\n    }\r\n</style>");
        }
        #pragma warning restore 1998
#nullable restore
#line 73 "C:\Users\Rebo\source\repos\DAaaS\BlazorDataAnalytics\Pages\UserVault.razor"
       
    BlazorDataAnalytics.Dialogs.MessageBoxDialog messageBoxDialog;
    BlazorDataAnalytics.Dialogs.PowerBITemplateDialog powerBiTemplateDialog;
    UserVaultDialog UserVaultDialog;
    DeleteUserVaultDialog DeleteUserVaultDialog;
    [CascadingParameter]
    public IModalService Modal { get; set; }

    public string text { get; set; }

    private int customerTenantID { get; set; }
    private bool showSpinner { get; set; } = false;

    private List<UserVaultModel> listUserVaults { get; set; } = new List<UserVaultModel>();

    private UserNameGroupRolesModel userNameGroupRolesModel = new UserNameGroupRolesModel();
    private string userNameIdentity { get; set; }
    private string customerTenantName { get; set; }
    private bool isPowerBITemplate { get; set; } = false;

    protected override async Task OnInitializedAsync()
    {

        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        var userNameGroupRolesModel = await _userSecurityService.GetUserNameGroupRoles(user.Identity.Name);

        customerTenantID = userNameGroupRolesModel.CustomerTenantId;
        customerTenantName = userNameGroupRolesModel.CustomerName;

        await SearchUserVaults();
    }

    //Events
    public async void OnActionBegin(ActionEventArgs<UserVaultModel> args)
    {
        DatasetGovernanceModel model = new DatasetGovernanceModel();

        if (args.RequestType == Syncfusion.Blazor.Grids.Action.Cancel)
        {
            // Triggers once cancel operation completes
        }
        else if (args.RequestType == Syncfusion.Blazor.Grids.Action.Add)
        {
            // Triggers once save operation completes
            args.Cancel = true;
            await AddUserVault();
        }
        else if (args.RequestType == Syncfusion.Blazor.Grids.Action.Delete)
        {
            // Triggers once delete operation completes
        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await SearchUserVaults();
            StateHasChanged();
        }
    }

    private async Task SearchUserVaults()
    {
        showSpinner = true;
        listUserVaults = await _userVaultService.SearchUserVault(text, customerTenantID);
        showSpinner = false;
        StateHasChanged();
    }


    private void RefreshCustomerPage(bool refreshParentPage)
    {
        if (refreshParentPage)
        {
            this.SearchUserVaults().ConfigureAwait(true);
        }
    }

    private async Task AddUserVault()
    {
        UserVaultModel userVaultModel = null;
        await UserVaultDialog.OpenDialog(userVaultModel);
    }

    private async Task EditUserVault(UserVaultModel userVaultModel)
    {
        isPowerBITemplate = false;
        await UserVaultDialog.OpenDialog(userVaultModel);
    }

    private async Task ViewDeleteUserVault(UserVaultModel userVaultModel)
    {
        isPowerBITemplate = false;
        if (userVaultModel != null)
        {
            DeleteUserVaultDialog.OpenDialog(userVaultModel.Id.Value);
        }
    }
    private async Task ViewPowerBITemplate(UserVaultModel userVaultModel)
    {
        isPowerBITemplate = true;
        StateHasChanged();
        PowerBIClient _client;
        PowerBIEmbedConfig _result;
        Guid _workspaceId;
        Reports _report;
        AuthenticationResult authenticationResult = null;
        authenticationResult = await DoAuthentication();

        var tokenCredentials = new TokenCredentials(authenticationResult.AccessToken, "Bearer");
        // var userNameGroupRolesModel = await _userSecurityService.GetUserNameGroupRoles(user.Identity.Name);

        _result = new PowerBIEmbedConfig();
        _client = new PowerBIClient(new Uri("https://api.powerbi.com/"), tokenCredentials);

        //Retrieve workspace ID from customer
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        userNameIdentity = user?.Identity?.Name;
        userNameGroupRolesModel = await _userSecurityService.GetUserNameGroupRoles(userNameIdentity);


        _workspaceId = userNameGroupRolesModel.WorkspaceId; //Customer Workspace

        _report =  _client.Reports.GetReportsInGroup(new Guid( _configuration.GetSection("PowerBiTemplate:WorkspaceId").Value));
       _report.Value = _report.Value.Where(x => x.Name.ToLower().Replace(" ","").Contains(userVaultModel.SystemName.ToLower().Replace(" ", ""))).ToList();

        await powerBiTemplateDialog.OpenDialog(_workspaceId.ToString(), userVaultModel.Id ?? 0, customerTenantID, _client, _report, _result);

    }
    private async Task RunAzureSynapsePipeline(UserVaultModel userVaultModel)
    {
        isPowerBITemplate = false;
        try
        {
            showSpinner = true;
            var credential = new DefaultAzureCredential(new DefaultAzureCredentialOptions
                {
                    ManagedIdentityClientId = _configuration.GetSection("AzureAd:ClientId").Value,
                    InteractiveBrowserTenantId = "94e6b5f2-d1da-4de9-a4ca-88cfdb6c3de0",
                    SharedTokenCacheTenantId = "94e6b5f2-d1da-4de9-a4ca-88cfdb6c3de0",
                    VisualStudioTenantId = "94e6b5f2-d1da-4de9-a4ca-88cfdb6c3de0",
                    SharedTokenCacheUsername = "Eric@qualiticks.com"
                });



            var pipelineClient = new PipelineClient(
            new Uri("https://qtx-daaas.dev.azuresynapse.net"),
            credential);

            var parameters = new Dictionary<string, object>
            {
                { "Customer", customerTenantName },
                { "Application", userVaultModel.SystemName },
            };

            var run = await pipelineClient.CreatePipelineRunAsync("Master", parameters: parameters).ConfigureAwait(false);


            messageBoxDialog.OpenDialog(AlertStatus.Success, "Sync starterd with Id: " + run.Value.RunId);
        }
        catch (Exception ex)
        {

            messageBoxDialog.OpenDialog(AlertStatus.Danger, ex.Message);

        }
        finally
        {
            showSpinner = false;
        }
    }

    private const string AuthorityFormat = "https://login.microsoftonline.com/94e6b5f2-d1da-4de9-a4ca-88cfdb6c3de0/v2.0";
    private const string MSGraphScope = "https://analysis.windows.net/powerbi/api/.default";
    private async Task<Microsoft.Identity.Client.AuthenticationResult> DoAuthentication()
    {
        IConfidentialClientApplication daemonClient;
        daemonClient = ConfidentialClientApplicationBuilder.Create(_configuration.GetSection("AzureAd:ClientId").Value)
            .WithAuthority(string.Format(AuthorityFormat, _configuration.GetSection("AzureAd:TenantId").Value))
            .WithClientSecret(_configuration.GetSection("AzureAd:ClientSecret").Value)
            .Build();

        AuthenticationResult authResult = await daemonClient.AcquireTokenForClient(new[] { MSGraphScope }).ExecuteAsync();
        return authResult;
    }




#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IConfiguration _configuration { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IUserSecurityService _userSecurityService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IUserVaultService _userVaultService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IKeyVaultManager _keyVaultManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private AuthenticationStateProvider AuthenticationStateProvider { get; set; }
    }
}
namespace __Blazor.BlazorDataAnalytics.Pages.UserVault
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateSfGrid_0<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Collections.Generic.IEnumerable<TValue> __arg0, int __seq1, global::System.String __arg1, int __seq2, global::System.String __arg2, int __seq3, global::System.Object __arg3, int __seq4, global::Microsoft.AspNetCore.Components.RenderFragment __arg4)
        {
        __builder.OpenComponent<global::Syncfusion.Blazor.Grids.SfGrid<TValue>>(seq);
        __builder.AddAttribute(__seq0, "DataSource", __arg0);
        __builder.AddAttribute(__seq1, "Height", __arg1);
        __builder.AddAttribute(__seq2, "Width", __arg2);
        __builder.AddAttribute(__seq3, "Toolbar", __arg3);
        __builder.AddAttribute(__seq4, "ChildContent", __arg4);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
